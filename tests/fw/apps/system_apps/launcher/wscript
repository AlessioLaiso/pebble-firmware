from waftools.pebble_test import clar

def build(ctx):
    common_sources_ant_glob = (
        " src/fw/applib/fonts/codepoint.c"
        " src/fw/applib/graphics/${BITDEPTH}_bit/framebuffer.c"
        " src/fw/applib/graphics/${BITDEPTH}_bit/bitblt_private.c"
        " src/fw/applib/graphics/bitblt.c"
        " src/fw/applib/graphics/gbitmap.c"
        " src/fw/applib/graphics/gcolor_definitions.c"
        " src/fw/applib/graphics/gdraw_command.c"
        " src/fw/applib/graphics/gdraw_command_frame.c"
        " src/fw/applib/graphics/gdraw_command_image.c"
        " src/fw/applib/graphics/gdraw_command_list.c"
        " src/fw/applib/graphics/gdraw_command_sequence.c"
        " src/fw/applib/graphics/gdraw_command_transforms.c"
        " src/fw/applib/graphics/gpath.c"
        " src/fw/applib/graphics/graphics.c"
        " src/fw/applib/graphics/graphics_bitmap.c"
        " src/fw/applib/graphics/graphics_circle.c"
        " src/fw/applib/graphics/graphics_line.c"
        " src/fw/applib/graphics/graphics_private.c"
        " src/fw/applib/graphics/graphics_private_raw.c"
        " src/fw/applib/graphics/gtypes.c"
        " src/fw/applib/graphics/text_layout.c"
        " src/fw/applib/graphics/text_render.c"
        " src/fw/applib/graphics/text_resources.c"
        " src/fw/applib/graphics/utf8.c"
        " src/fw/applib/ui/animation_interpolate.c"
        " src/fw/applib/ui/animation_timing.c"
        " src/fw/applib/ui/inverter_layer.c"
        " src/fw/applib/ui/layer.c"
        " src/fw/applib/ui/menu_layer.c"
        " src/fw/applib/ui/scroll_layer.c"
        " src/fw/applib/ui/shadows.c"
        " src/fw/applib/ui/window.c"
        " src/fw/drivers/flash/flash_crc.c"
        " src/fw/flash_region/filesystem_regions.c"
        " src/fw/flash_region/flash_region.c"
        " src/fw/resource/resource.c"
        " src/fw/resource/resource_storage.c"
        " src/fw/resource/resource_storage_builtin.c"
        " src/fw/resource/resource_storage_file.c"
        " src/fw/resource/resource_storage_flash.c"
        " src/fw/services/normal/filesystem/flash_translation.c"
        " src/fw/services/normal/filesystem/pfs.c"
        " src/fw/system/hexdump.c"
        " src/fw/util/crc8.c"
        " src/fw/util/legacy_checksum.c"
        " tests/fakes/fake_display.c"
        " tests/fakes/fake_rtc.c"
        " tests/fakes/fake_spi_flash.c"
        " tests/fixtures/resources/builtin_resources.auto.c"
        " tests/fixtures/resources/pfs_resource_table.c"
    )

    clar(ctx,
        sources_ant_glob=(
            common_sources_ant_glob +
            " src/fw/applib/graphics/framebuffer.c"
            " src/fw/applib/graphics/gbitmap_png.c"
            " src/fw/applib/graphics/gbitmap_sequence.c"
            " src/fw/applib/template_string.c"
            " src/fw/applib/ui/content_indicator.c"
            " src/fw/applib/ui/kino/kino_reel.c"
            " src/fw/applib/ui/kino/kino_reel_custom.c"
            " src/fw/applib/ui/kino/kino_reel_gbitmap.c"
            " src/fw/applib/ui/kino/kino_reel_gbitmap_sequence.c"
            " src/fw/applib/ui/kino/kino_reel_pdci.c"
            " src/fw/applib/ui/kino/kino_reel_pdcs.c"
            " src/fw/applib/ui/menu_layer_system_cells.c"
            " src/fw/applib/vendor/tinflate/tinflate.c"
            " src/fw/applib/vendor/uPNG/upng.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_alarms.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_generic.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_music.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_notifications.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_private.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_service.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_settings.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_structured.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_watchfaces.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_weather.c"
            " src/fw/apps/system_apps/launcher/default/launcher_app_glance_workout.c"
            " src/fw/apps/system_apps/launcher/default/launcher_menu_layer.c"
            " src/fw/apps/system_apps/timeline/text_node.c"
            " src/fw/board/displays/display_spalding.c"
            " src/fw/services/normal/app_glances/app_glance_service.c"
            " src/fw/services/normal/blob_db/app_glance_db.c"
            " src/fw/services/normal/filesystem/app_file.c"
            " src/fw/services/normal/timeline/attribute.c"
            " src/fw/util/buffer.c"
            " src/fw/util/lru_cache.c"
            " tests/fakes/fake_applib_resource.c"
            " tests/fakes/fake_fonts.c"
            " tests/fakes/fake_settings_file.c"
            " tests/fixtures/resources/timeline_resource_table.auto.c"
            " tests/stubs/stubs_animation.c"
            " tests/stubs/stubs_app_install_manager.c"
            " tests/stubs/stubs_app_menu_data_source.c"
        ),
        test_sources_ant_glob="test_launcher_menu_layer.c",
        defines=ctx.env.test_image_defines,
        runtime_deps=(ctx.env.test_pngs + ctx.env.test_pbis + ctx.env.test_pfos),
        override_includes=["dummy_board"],
        platforms=["silk", "snowy", "spalding", "robert"])

# vim:filetype=python
